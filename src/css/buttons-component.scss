@use "mixins/utils" as utils;
@use "sass:map";

$height: 40px !default;
$padding: 0.5em 1em !default;
$font: ("size": 1rem, "weight": 400, "height": 1.5) !default;
$border: ("width": 1px, "radius": .375em) !default;
$ring-width: 1px !default;
$ring-offset: 2px !default;

.btn {
  height: $height;
  padding: $padding;
  font-size: map.get($font, "size");
  font-weight: map.get($font, "weight");
  line-height: map.get($font, "height");
  color: utils.getColor(--foreground);
  text-align: center;
  text-decoration: none;
  vertical-align: middle;
  user-select: none;
  cursor: pointer;
  display: inline-block;
  background-color: transparent;
  border: map.get($border, "width") solid transparent;
  border-radius: map.get($border, "radius");
  transition:
      color .15s ease-in-out,
      background-color .15s ease-in-out,
      border-color .15s ease-in-out,
      box-shadow .15s ease-in-out;

  &:active {
    transition-duration: 0s;
  }

  &:disabled, &[aria-disabled="true"], &.loading {
    box-shadow: none;
    pointer-events: none;
    cursor: default;
  }

  &.loading {
    color: transparent;
    background-size: 26px 26px;
    position: relative;

    * {
      display: none;
    }

    &:before {
      content: "";
      top: 3px;
      width: 22px;
      height: 22px;
      box-sizing: border-box;
      position: relative;
      display: inline-block;
      border-radius: 50%;
      border: 2px solid;
      object-fit: cover;
      animation: #{utils.$prefix}-spinner-animation 1.7s linear infinite both normal;
    }
  }

  &.w-full {
    width: 100%;
    max-width: 100%;
  }

  &.btn-accent {
    background-color: utils.getColor(--btn-accent-bg);
    border-color: utils.getColor(--btn-accent-bg);
    color: utils.getColor(--btn-accent-fg);

    &:hover {
      background-color: utils.getColor(--btn-accent-hover-bg);
      border-color: utils.getColor(--btn-accent-hover-bg);
      color: utils.getColor(--btn-accent-hover-fg);
    }

    &:active {
      background-color: utils.getColor(--btn-accent-active-bg);
      border-color: utils.getColor(--btn-accent-active-bg);
      color: utils.getColor(--btn-accent-active-fg);
    }

    &:disabled,
    &[aria-disabled="true"] {
      background-color: utils.getColor(--btn-accent-bg);
      border-color: utils.getColor(--btn-accent-bg);
      color: utils.getColor(--btn-accent-fg);
      filter: contrast(0.5) brightness(0.6);
    }

    &.loading {

      &:before {
        border-color: utils.getColor(--btn-accent-fg);
      }
    }
  }

  &.btn-primary {
    background-color: utils.getColor(--btn-primary-bg);
    border-color: utils.getColor(--btn-primary-bg);
    color: utils.getColor(--btn-primary-fg);

    &:hover {
      background-color: utils.getColor(--btn-primary-hover-bg);
      border-color: utils.getColor(--btn-primary-hover-bg);
      color: utils.getColor(--btn-primary-hover-fg);
    }

    &:active {
      background-color: utils.getColor(--btn-primary-active-bg);
      border-color: utils.getColor(--btn-primary-active-bg);
      color: utils.getColor(--btn-primary-active-fg);
    }

    &:disabled,
    &[aria-disabled="true"] {
      background-color: utils.getColor(--btn-primary-bg);
      border-color: utils.getColor(--btn-primary-bg);
      color: utils.getColor(--btn-primary-fg);
      filter: contrast(0.5) brightness(0.6);
    }

    &.loading {

      &:before {
        border-color: utils.getColor(--btn-primary-fg);
      }
    }
  }

  &.btn-secondary {
    background-color: utils.getColor(--btn-secondary-bg);
    border-color: utils.getColor(--btn-secondary-bg);
    color: utils.getColor(--btn-secondary-fg);

    &:hover {
      background-color: utils.getColor(--btn-secondary-hover-bg);
      border-color: utils.getColor(--btn-secondary-hover-bg);
      color: utils.getColor(--btn-secondary-hover-fg);
    }

    &:active {
      background-color: utils.getColor(--btn-secondary-active-bg);
      border-color: utils.getColor(--btn-secondary-active-bg);
      color: utils.getColor(--btn-secondary-active-fg);
    }

    &:disabled,
    &[aria-disabled="true"] {
      background-color: utils.getColor(--btn-secondary-bg);
      border-color: utils.getColor(--btn-secondary-bg);
      color: utils.getColor(--btn-secondary-fg);
      filter: contrast(0.5) brightness(0.6);
    }

    &.loading {

      &:before {
        border-color: utils.getColor(--btn-secondary-fg);
      }
    }
  }
  
  &.btn-danger {
    background-color: utils.getColor(--btn-danger-bg);
    border-color: utils.getColor(--btn-danger-bg);
    color: utils.getColor(--btn-danger-fg);

    &:hover {
      background-color: utils.getColor(--btn-danger-hover-bg);
      border-color: utils.getColor(--btn-danger-hover-bg);
      color: utils.getColor(--btn-danger-hover-fg);
    }

    &:active {
      background-color: utils.getColor(--btn-danger-active-bg);
      border-color: utils.getColor(--btn-danger-active-bg);
      color: utils.getColor(--btn-danger-active-fg);
    }

    &:disabled,
    &[aria-disabled="true"] {
      background-color: utils.getColor(--btn-danger-bg);
      border-color: utils.getColor(--btn-danger-bg);
      color: utils.getColor(--btn-danger-fg);
      filter: contrast(0.5) brightness(0.6);
    }

    &.loading {

      &:before {
        border-color: utils.getColor(--btn-danger-fg);
      }
    }
  }
  
  &.btn-outline-accent {
    background-color: transparent;
    border-color: utils.getColor(--btn-accent-bg);
    color: color-mix(in srgb, utils.getColor(--foreground, .8) 70%, utils.getColor(--btn-accent-bg, .8) 30%);

    &:hover {
      background-color: utils.getColor(--btn-accent-hover-bg, .1);
      border-color: utils.getColor(--btn-accent-bg);
      color: color-mix(in srgb, utils.getColor(--foreground, .9) 80%, utils.getColor(--btn-accent-bg, .9) 20%);
    }

    &:active {
      background-color: utils.getColor(--btn-accent-active-bg, .15);
      border-color: utils.getColor(--btn-accent-active-bg);
      color: color-mix(in srgb, utils.getColor(--foreground, .95) 85%, utils.getColor(--btn-accent-bg, .95) 15%);
    }

    &:disabled,
    &[aria-disabled="true"] {
      background-color: utils.getColor(--btn-accent-bg, .25);
      border-color: utils.getColor(--btn-accent-bg, .25);
      color: color-mix(in srgb, utils.getColor(--foreground, .8) 70%, utils.getColor(--btn-accent-bg, .8) 30%);
      filter: contrast(0.5);
    }

    &.loading {
      border-color: utils.getColor(--btn-accent-bg);
      color: utils.getColor(--btn-accent-bg);

      &:before {

      }
    }
  }

  &.btn-outline-primary {
    background-color: transparent;
    border-color: utils.getColor(--btn-primary-bg);
    color: color-mix(in srgb, utils.getColor(--foreground, .8) 70%, utils.getColor(--btn-primary-bg, .8) 30%);

    &:hover {
      background-color: utils.getColor(--btn-primary-hover-bg, .1);
      border-color: utils.getColor(--btn-primary-bg);
      color: color-mix(in srgb, utils.getColor(--foreground, .9) 80%, utils.getColor(--btn-primary-bg, .9) 20%);
    }

    &:active {
      background-color: utils.getColor(--btn-primary-active-bg, .15);
      border-color: utils.getColor(--btn-primary-active-bg);
      color: color-mix(in srgb, utils.getColor(--foreground, .95) 85%, utils.getColor(--btn-primary-bg, .95) 15%);
    }

    &:disabled,
    &[aria-disabled="true"] {
      background-color: utils.getColor(--btn-primary-bg, .25);
      border-color: utils.getColor(--btn-primary-bg, .25);
      color: color-mix(in srgb, utils.getColor(--foreground, .8) 70%, utils.getColor(--btn-primary-bg, .8) 30%);
      filter: contrast(0.5);
    }

    &.loading {
      border-color: utils.getColor(--btn-primary-bg);
      color: utils.getColor(--btn-primary-bg);

      &:before {

      }
    }
  }

  &.btn-outline-secondary {
    background-color: transparent;
    border-color: utils.getColor(--btn-secondary-bg);
    color: color-mix(in srgb, utils.getColor(--foreground, .8) 70%, utils.getColor(--btn-secondary-bg, .8) 30%);

    &:hover {
      background-color: utils.getColor(--btn-secondary-hover-bg, .1);
      border-color: utils.getColor(--btn-secondary-bg);
      color: color-mix(in srgb, utils.getColor(--foreground, .9) 80%, utils.getColor(--btn-secondary-bg, .9) 20%);
    }

    &:active {
      background-color: utils.getColor(--btn-secondary-active-bg, .15);
      border-color: utils.getColor(--btn-secondary-active-bg);
      color: color-mix(in srgb, utils.getColor(--foreground, .95) 85%, utils.getColor(--btn-secondary-bg, .95) 15%);
    }

    &:disabled,
    &[aria-disabled="true"] {
      background-color: utils.getColor(--btn-secondary-bg, .25);
      border-color: utils.getColor(--btn-secondary-bg, .25);
      color: color-mix(in srgb, utils.getColor(--foreground, .8) 70%, utils.getColor(--btn-secondary-bg, .8) 30%);
      filter: contrast(0.5);
    }

    &.loading {
      border-color: utils.getColor(--btn-secondary-bg);
      color: utils.getColor(--btn-secondary-bg);

      &:before {

      }
    }
  }

  &.btn-outline-danger {
    background-color: transparent;
    border-color: utils.getColor(--btn-danger-bg);
    color: color-mix(in srgb, utils.getColor(--foreground, .8) 70%, utils.getColor(--btn-danger-bg, .8) 30%);

    &:hover {
      background-color: utils.getColor(--btn-danger-hover-bg, .1);
      border-color: utils.getColor(--btn-danger-bg);
      color: color-mix(in srgb, utils.getColor(--foreground, .9) 80%, utils.getColor(--btn-danger-bg, .9) 20%);
    }

    &:active {
      background-color: utils.getColor(--btn-danger-active-bg, .15);
      border-color: utils.getColor(--btn-danger-active-bg);
      color: color-mix(in srgb, utils.getColor(--foreground, .95) 85%, utils.getColor(--btn-danger-bg, .95) 15%);
    }

    &:disabled,
    &[aria-disabled="true"] {
      background-color: utils.getColor(--btn-danger-bg, .25);
      border-color: utils.getColor(--btn-danger-bg, .25);
      color: color-mix(in srgb, utils.getColor(--foreground, .8) 70%, utils.getColor(--btn-danger-bg, .8) 30%);
      filter: contrast(0.5);
    }

    &.loading {
      border-color: utils.getColor(--btn-danger-bg);
      color: utils.getColor(--btn-danger-bg);

      &:before {

      }
    }
  }
}

@keyframes #{utils.$prefix}-spinner-animation {
  0% { /* 0 - 30 */
    transform: rotate(0deg);
    clip-path: path(evenodd, "M 12 12 L 24 12 A 12 12 0 0 1 22.3923 18 L 12 12 Z");
  }
  10% { /* 18 - 90 */
    transform: rotate(36deg);
    clip-path: path(evenodd, "M 12 12 L 23.41268 15.7082 A 12 12 0 0 1 12 24 L 12 12 Z");
  }
  20% { /* 36 - 150 */
    transform: rotate(72deg);
    clip-path: path(evenodd, "M 12 12 L 21.7082 19.05342 A 12 12 0 0 1 1.6077 18 L 12 12 Z");
  }
  30% { /* 54 - 210 */
    transform: rotate(108deg);
    clip-path: path(evenodd, "M 12 12 L 19.05342 21.7082 A 12 12 0 1 1 1.6077 6 L 12 12 Z");
  }
  40% { /* 72 - 270 */
    transform: rotate(144deg);
    clip-path: path(evenodd, "M 12 12 L 15.7082 23.41268 A 12 12 0 1 1 12 0 L 12 12 Z");
  }
  50% { /* 90 - 330 */
    transform: rotate(180deg);
    clip-path: path(evenodd, "M 12 12 L 12 24 A 12 12 0 1 1 22.3923 6 L 12 12 Z");
  }
  60% { /* 144 - 342 */
    transform: rotate(216deg);
    clip-path: path(evenodd, "M 12 12 L 2.2918 19.05342 A 12 12 0 1 1 23.41268 8.2918 L 12 12 Z");
  }
  70% { /* 198 - 354 */
    transform: rotate(252deg);
    clip-path: path(evenodd, "M 12 12 L 0.58732 8.2918 A 12 12 0 1 1 23.93426 10.74566 L 12 12 Z");
  }
  80% { /* 252 - 366 */
    transform: rotate(288deg);
    clip-path: path(evenodd, "M 12 12 L 8.2918 0.58732 A 12 12 0 1 1 23.93426 13.25434 L 12 12 Z");
  }
  90% { /* 306 - 378 */
    transform: rotate(324deg);
    clip-path: path(evenodd, "M 12 12 L 19.05342 2.2918 A 12 12 0 1 1 23.41268 15.7082 L 12 12 Z");
  }
  100% { /* 360 - 390 */
    transform: rotate(360deg);
    clip-path: path(evenodd, "M 12 12 L 24 12 A 12 12 0 1 1 22.3923 18 L 12 12 Z");
  }
}