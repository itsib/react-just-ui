html {
  --jj-image-animation: jj-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.jj.jj-avatar {
  aspect-ratio: 1;
  position: relative;

  .avatar {
    width: inherit;
    height: inherit;
    border-radius: var(--jj-border-radius-full);
    overflow: hidden;
    border-style: solid;
    border-color: rgb(var(--jj-bg-rgb));
    background-color: rgb(var(--jj-bg-rgb));
    animation: var(--jj-image-animation);
    transition: border-color .2s ease-in-out;

    & > * {
      width: inherit;
      height: inherit;
      border-radius: var(--jj-border-radius-full);
      overflow: hidden;
      aspect-ratio: 1;
      display: block;
      transition: opacity .2s ease-in-out;
      opacity: 0;
    }

    .jj-image-placeholder {
      color: rgb(var(--jj-image-border-rgb));
      background-color: currentColor;
      mask-repeat: no-repeat;
      mask-size: 100% 100%;
    }
  }

  .ripple {
    top: 0;
    left: 0;
    width: inherit;
    height: inherit;
    border: 1px solid rgb(var(--jj-image-border-rgb));
    border-radius: var(--jj-border-radius-full);
    position: absolute;
    animation: 1.5s linear 0s infinite normal none running jj-image-ripple;
    display: none;
  }

  &.ready {

    .avatar {
      animation: none;
      border-color: rgb(var(--jj-image-border-rgb));

      & > * {
        opacity: 1;
      }
    }
  }

  &.active {

    .avatar {
      border-color: rgb(var(--jj-image-border-rgb) / 25%);
    }

    .ripple {
      display: block;
    }
  }

  &.loading {

    .avatar {
      animation: var(--jj-image-animation);
      border-color: rgb(var(--jj-image-bg-rgb));

      & > * {
        opacity: 0;
      }
    }
  }

  &.disabled {
    filter: grayscale(1) brightness(0.5);
    pointer-events: none;
  }
}

